<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import com.jfoenix.controls.JFXDatePicker?>
<?import javafx.scene.control.DatePicker?>

<AnchorPane prefHeight="650.0" prefWidth="1300.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="tn.cinema.controllers.PublicitesStats">
    <styles>
        <String fx:value="
            /* Style de base */
            .root {
                -fx-font-family: 'Arial';
                -fx-base: #1a2b5f;
                -fx-background-color: #0d1a40;
            }

            /* Style des cartes */
            .section-title {
                -fx-text-fill: white;
                -fx-font-size: 16px;
                -fx-font-weight: bold;
                -fx-padding: 0 0 10 0;
            }

            /* Style des contrôles de filtre */
            .filter-control {
                -fx-background-color: #2c3e50;
                -fx-text-fill: white;
                -fx-prompt-text-fill: #b0bec5;
                -fx-background-radius: 5;
                -fx-border-radius: 5;
                -fx-border-color: #b0bec5;
                -fx-border-width: 1;
            }

            .filter-button {
                -fx-background-color: #3498db;
                -fx-text-fill: white;
                -fx-background-radius: 5;
                -fx-font-weight: bold;
                -fx-padding: 5 15;
            }

            .reset-button {
                -fx-background-color: #e74c3c;
                -fx-text-fill: white;
                -fx-background-radius: 5;
                -fx-font-weight: bold;
                -fx-padding: 5 15;
            }

            /* Style des graphiques */
            .chart {
                -fx-background-color: transparent;
            }

            .chart-title {
                -fx-text-fill: white;
                -fx-font-size: 14px;
            }

            .axis-label {
                -fx-text-fill: white;
            }

            .chart-legend {
                -fx-background-color: transparent;
            }

            .chart-legend-item {
                -fx-text-fill: white;
            }

            .chart-pie-label {
                -fx-fill: white;
                -fx-font-size: 12px;
            }

            /* Style des tables */
            .table-view {
                -fx-background-color: #2c3e50;
                -fx-text-fill: white;
                -fx-border-color: #34495e;
                -fx-border-radius: 5;
                -fx-background-radius: 5;
            }

            .table-view .column-header-background {
                -fx-background-color: #34495e;
                -fx-background-radius: 5 5 0 0;
            }

            .table-view .column-header {
                -fx-background-color: transparent;
                -fx-text-fill: white;
                -fx-font-weight: bold;
                -fx-font-size: 14px;
            }

            .table-view .table-cell {
                -fx-text-fill: white;
                -fx-font-size: 13px;
                -fx-alignment: CENTER;
                -fx-border-color: transparent;
            }

            .table-row-cell {
                -fx-background-color: #2c3e50;
            }

            .table-row-cell:odd {
                -fx-background-color: #34495e;
            }

            .table-row-cell:selected {
                -fx-background-color: #3e2063;
            }

            /* Couleurs des graphiques */
            .default-color0.chart-bar { -fx-bar-fill: #3498db; }
            .default-color1.chart-bar { -fx-bar-fill: #2ecc71; }
            .default-color2.chart-bar { -fx-bar-fill: #f39c12; }

            .default-color0.chart-pie { -fx-pie-color: #3498db; }
            .default-color1.chart-pie { -fx-pie-color: #2ecc71; }
            .default-color2.chart-pie { -fx-pie-color: #f39c12; }
            .default-color3.chart-pie { -fx-pie-color: #e74c3c; }
            .default-color4.chart-pie { -fx-pie-color: #9b59b6; }

            /* Style du ScrollPane */
            .scroll-pane {
                -fx-background: transparent;
                -fx-background-color: transparent;
            }

            .scroll-pane .viewport {
                -fx-background-color: transparent;
            }

            .scroll-bar:horizontal .thumb,
            .scroll-bar:vertical .thumb {
                -fx-background-color: #6a4d8a;
                -fx-background-radius: 5;
            }
        "/>
    </styles>

    <children>
        <!-- Sidebar -->
        <AnchorPane layoutY="-8.0" prefHeight="651.0" prefWidth="200.0" style="-fx-background-color: #021b50; -fx-background-radius: 10;">
            <!-- Contenu du sidebar existant -->
        </AnchorPane>

        <!-- Header -->
        <Pane layoutX="215.0" layoutY="14.0" prefHeight="67.0" prefWidth="1076.0" style="-fx-background-color: #1a2b5f; -fx-background-radius: 30;">
            <children>
                <Label layoutX="41.0" layoutY="18.0" text="STATISTIQUES DES PUBLICITÉS" textFill="WHITE">
                    <font>
                        <Font name="System Bold" size="24.0" />
                    </font>
                </Label>
            </children>
        </Pane>

        <!-- Main Content -->
        <ScrollPane layoutX="215.0" layoutY="89.0" prefHeight="554.0" prefWidth="1068.0" style="-fx-background: transparent;">
            <content>
                <VBox fx:id="statsContainer" spacing="20" style="-fx-padding: 20;">
                    <!-- Filtres -->
                    <HBox spacing="20" style="-fx-padding: 0 0 20 0;">
                        <DatePicker fx:id="dateDebutPicker" promptText="Date de début" styleClass="filter-control"/>
                        <DatePicker fx:id="dateFinPicker" promptText="Date de fin" styleClass="filter-control"/>
                        <Button text="Filtrer" onAction="#handleFilter" styleClass="filter-button"/>
                        <Button text="Réinitialiser" onAction="#handleReset" styleClass="reset-button"/>
                    </HBox>

                    <!-- Calendrier des publicités -->
                    <VBox style="-fx-background-color: #1a2b5f; -fx-background-radius: 10; -fx-padding: 15;">
                        <Label text="CALENDRIER DES PUBLICITÉS" styleClass="section-title"/>
                        <TableView fx:id="calendarTable" prefHeight="200">
                            <columns>
                                <TableColumn fx:id="titreCol" text="Titre" prefWidth="200"/>
                                <TableColumn fx:id="dateDebutCol" text="Date Début" prefWidth="150"/>
                                <TableColumn fx:id="dateFinCol" text="Date Fin" prefWidth="150"/>
                                <TableColumn fx:id="supportCol" text="Support" prefWidth="150"/>
                                <TableColumn fx:id="montantCol" text="Montant (TND)" prefWidth="150"/>
                            </columns>
                        </TableView>
                    </VBox>

                    <!-- Statistiques par année -->
                    <HBox spacing="20">
                        <!-- Graphique nombre de publicités -->
                        <VBox style="-fx-background-color: #1a2b5f; -fx-background-radius: 10; -fx-padding: 15;" prefWidth="500">
                            <Label text="NOMBRE DE PUBLICITÉS PAR ANNÉE" styleClass="section-title"/>
                            <BarChart fx:id="countByYearChart" prefHeight="300">
                                <xAxis>
                                    <CategoryAxis label="Année"/>
                                </xAxis>
                                <yAxis>
                                    <NumberAxis label="Nombre"/>
                                </yAxis>
                            </BarChart>
                        </VBox>

                        <!-- Graphique rentabilité -->
                        <VBox style="-fx-background-color: #1a2b5f; -fx-background-radius: 10; -fx-padding: 15;" prefWidth="500">
                            <Label text="RENTABILITÉ PAR ANNÉE (TND)" styleClass="section-title"/>
                            <BarChart fx:id="profitByYearChart" prefHeight="300">
                                <xAxis>
                                    <CategoryAxis label="Année"/>
                                </xAxis>
                                <yAxis>
                                    <NumberAxis label="Montant (TND)"/>
                                </yAxis>
                            </BarChart>
                        </VBox>
                    </HBox>

                    <!-- Statistiques par support -->
                    <VBox style="-fx-background-color: #1a2b5f; -fx-background-radius: 10; -fx-padding: 15;">
                        <Label text="RÉPARTITION PAR SUPPORT" styleClass="section-title"/>
                        <PieChart fx:id="supportPieChart" prefHeight="300"/>
                    </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </children>
</AnchorPane>